{% extends 'base.html' %}

{% block title %}–ü—Ä–æ–µ–∫—Ç{% endblock %}

{% block content %}
    <h1>{{ name }}</h1>
    <p>id = {{ id }}</p>
    <div><a role="button" class="btn btn-primary" href="{{ url_for("project.edit_project", id=id) }}">–ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</a></div>

    <div class="accordion" id="accordionPanelsStayOpenExample">
      <div class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-headingOne">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
            –°—Ç—Ä—É–∫—Ç—É—Ä–∞
          </button>
        </h2>
        <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
          <div class="accordion-body">
              {% if file_tree %}
                <ul class="list-group">
                    {% macro render_tree(tree, parent_id='root') %}
                        {% for node in tree %}
                            <li class="list-group-item">
                                {% if node.type == 'folder' %}
                                    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –≤–ª–æ–∂–µ–Ω–Ω–æ–π –ø–∞–ø–∫–∏ -->
                                    <button class="btn btn-link" data-bs-toggle="collapse" data-bs-target="#collapse-{{ parent_id }}-{{ loop.index }}">
                                        üìÅ {{ node.name }}
                                    </button>

                                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ -->
                                    <div id="collapse-{{ parent_id }}-{{ loop.index }}" class="collapse">
                                        <ul class="list-group mt-2">
                                            {{ render_tree(node.children, parent_id ~ '-' ~ loop.index) }}
                                        </ul>
                                    </div>
                                {% else %}
                                    üìÑ {{ node.name }}
                                {% endif %}
                            </li>
                        {% endfor %}
                    {% endmacro %}

                    {{ render_tree(file_tree) }}
                </ul>
              {% endif %}
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
            –û–ø–∏—Å–∞–Ω–∏–µ
          </button>
        </h2>
        <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
          <div class="accordion-body">
              <div>{{ description }}</div>
          </div>
        </div>
      </div>
    </div>
{% endblock %}